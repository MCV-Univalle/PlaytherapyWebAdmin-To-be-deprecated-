{% extends "base.html" %}
{# Load the tag library #}
{% load bootstrap3 %}
{% load staticfiles %}

{# Load CSS and JavaScript #}


{% block specific-css %}
    <style type="text/css">
    .buttons{
      width: 80%;
      margin-left: 10%;
      margin-top: 30px;
    }
    
    .alert{
        padding: 5px 5px 5px 15px;
    }
    
      
    @media (max-width: 768px) {
      .btn-responsive {
        margin:2px 4px;
        /*padding:2px 4px;*/
        /*font-size:80%;*/
        /*line-height: 1;*/
        /*border-radius:3px;*/
      }
    }
    
    @media (min-width: 769px) and (max-width: 992px) {
      .btn-responsive {
        margin:4px 9px;
        /*font-size:90%;*/
        /*line-height: 1.2;*/
      }
    }

    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <link rel="stylesheet" href="{% static 'vendor/morrisjs/morris.css' %}" rel="stylesheet">
    {{ form.media }}

{% endblock %}

{% block content %}
{# ================ insert here all the content of the page =============== #}
<div id="page-wrapper" class="full-screen-w">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Hist√≥rico de puntaje FIM</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <div class="row">
        {% include "panel_info_patient.html" %}
    </div>
    <!-- /.row -->
     {% include "messages.html" %}
    <div class="row">
        <div class="col-lg-12">
            <div class="panel-body">
                <div class="row">
                    <div class="col-xs-10 col-xs-offset-1 col-sm-10 -col-sm-offset-1 col-md-12 col-md-offset-1 col-lg-12 col-lg-offset-0">
                        <form class="form-group-up form-horizontal forml" action="" method="POST">
                            {% csrf_token %}
                            <fieldset>
                                <label style="color: #880000 ">{{ form.non_field_errors }}</label>

                                <!--********************************** Date initial **********************************-->
                                {% bootstrap_field form.date1 layout='horizontal' horizontal_label_class='col-lg-2' horizontal_field_class='form-group col-lg-10' form_group_class='row' %}
                                
                                <!--********************************** Date final **********************************-->
                                {% bootstrap_field form.date2 layout='horizontal' horizontal_label_class='col-lg-2' horizontal_field_class='form-group col-lg-10' form_group_class='row' %}
                                
                                <div class="row buttons">
                                    {% bootstrap_button "Mostrar" button_type="submit" button_class="btn-primary col-xs-12 col-sm-12  col-md-4 col-md-offset-8 col-lg-4 col-lg-offset-8 btn-responsive" %}
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </div>
            </div>
            <!-- /.panel-body -->
            <div class="panel panel-default">
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div id="by_fim_chart"></div>
                </div>
                <!-- /.panel-body -->
                </div>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
</div>

{% endblock %}

{% block specific-js %}
<script type="text/javascript">
function itemWithTimer(id, tiempo){
  $(id).show();
  setTimeout(function() { $(id).hide(); }, tiempo*1000);
}
itemWithTimer("#message", 5)
</script>

<script>
    $('#confirm-delete').on('show.bs.modal', function(e) {
        $(this).find('.btn-ok').attr('href', $(e.relatedTarget).data('href'));
        
        // $('.debug-url').html('Delete URL: <strong>' + $(this).find('.btn-ok').attr('href') + '</strong>');
    });
</script>
<!-- Morris Charts JavaScript -->
<script src="{% static 'vendor/raphael/raphael.min.js' %}"></script>
<script src="{% static 'vendor/morrisjs/morris.min.js' %}"></script>
<script>
    var data = [
    {% for fim_and_total in fims_and_totals %}
        {total: {{ fim_and_total.1 }}, date: '{{ fim_and_total.0.date | date:"Y-m-d" }}'}{% if not forloop.last %},{% endif %}
    {% endfor %}
    ];
    console.log(data);
    
    Morris.Line({
        element: 'by_fim_chart',
        data: data,
        xkey: 'date',
        ykeys: ['total'],
        labels: ['FIM Total'],
        hideHover: 'auto'
      });
</script>
{% endblock %}